---
layout: pages
title: regular expression
date: 2017-06-12 11:54:37
tags:
- regular 
- expression
---
平时会经常使用正则表达式来对字符串进行一些抽取和分析，这里对正则表达式的基本语法进行梳理，并结合我实际过程中的使用加以解释。
正则表达式(regular expression)描述了一种字符串匹配的模式（pattern），它作为一个模板，将某个字符模式与所搜索的字符串进行匹配。可以用来检查一个串**是否含有某种子串**、**将匹配的子串替换**或者**从某个串中取出符合某个条件的子串**等。
<!--more-->
#### 正则中的字符
##### 非打印字符
常见非打印字符的转义序列：

|字符|描述| 
|:-----:|:---|
|\n| 匹配一个换行符 |
|\r| 匹配一个回车（回到首行）符 |
|\s| 匹配任何空白字，包括空格，制表符，换页符等 |
|\S| 匹配任何非空白字符|
|\t|匹配一个制表符|
***
##### 特殊字符
特殊字符就是一些有特殊含义的字符。许多元字符要求在试图匹配它们时特别对待。若要匹配这些字符，必须先对这些字符进行**转义**，即，将反斜杠字符 '\' 放在它们前面。
正则表达式中的特殊字符：

|字符|描述| 
|:-----:|:---|
|^|匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 ^ 字符本身，请使用 \^。|
|$|匹配输入字符串的结尾位置。要匹配 $ 字符本身，请使用 \$。|
|()|标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 \( 和 \)。|
|*|匹配前面的子表达式**零次或多次**，等价于{0,}。要匹配 * 字符，请使用 \*。|
|+|匹配前面的子表达式**一次或多次**，等价于{1,}。要匹配 + 字符，请使用 \+。|
|**.**|匹配除换行符 \n 之外的任何单字符。要匹配 **.** ，请使用 \ **.** 。|
|?|匹配前面的子表达式**零次或一次**，或**指明一个非贪婪限定符**。要匹配 ? 字符，请使用 \?。|
| \ |指明两项之间的一个选择。要匹配该字符，请使用转义|
***
##### 限定符
限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 `*` 或 `+` 或 `?` 或 `{n}` 或 `{n,}` 或 `{n,m}` 共6种。

正则表达式的限定符有：

|字符|描述| 
|:-----:|:---|
|{n}|n 是一个非负整数。匹配确定的 n 次。|
|{n,}|n 是一个非负整数。**至少匹配n 次**。|
|{n,m}|m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。|

>*、+和?限定符都是贪婪的，因为它们会尽可能多的匹配文字，只有在它们的后面加上一个?就可以实现非贪婪或最小匹配。

***
##### 定位符
定位符能够将正则表达式固定到行首或行尾。

正则表达式的定位符有：

|字符|描述| 
|:-----:|:---|
|^|匹配输入字符串开始的位置。在[ ]中使用，代表非或排除的含义|
|$|匹配输入字符串结尾的位置。|
|\b|匹配一个字边界，即字与空格间的位置。|
|\B|非字边界匹配|

关于\b和\B的例子：
> - /\bCha/ : 匹配单词 Chapter 的开头三个字符;
> - /ter\b/ : 单词 Chapter 中的字符串 ter，因为它出现在字边界的前面;
> - /\Bapt/ : 匹配 Chapter 中的字符串 apt，但不匹配 aptitude 中的字符串 apt。
>> 因为字符串 apt 出现在单词 Chapter 中的非字边界处，但出现在单词 aptitude 中的字边界处。
***

#### 项目中的实例
（1）有这样一个字符串：'op_content->"$.roomid"' 或 'op_content->"$.rid"'。现在需要将roomid或者rid抽取出来。
	 在php中的实现：
	 ```
	 '/^(op_content->\"\$\.)+(\w+)/'
	 ```
	 
（2）对于字符串：
	 ① '/panda/fa6d953b44b505dee6522d2be6e29b66.flv?domain=flv-live-qn.panda.tv' 
	 ② '/panda/fa6d953b44b505dee6522d2be6e29b66.flv'。
	 需要从中抽取出：① panda；② fa6d953b44b505dee6522d2be6e29b66； ③ flv
	 在php中的实现：
	 ```
	 '#/(.+)/(\w+)\.(\w+)#'
	 ```
	 
在php中的正则，**匹配模式的开头与结尾需要成对**，即上边所看到的#。
由于需要匹配字符串中的/，所以不能再以/开头和结尾。同样的，如果需要匹配字符串中的特殊符号，该特殊符号也不可以作为开头和结尾的标识。